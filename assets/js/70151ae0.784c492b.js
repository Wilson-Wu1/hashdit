"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1209],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(a),u=i,m=p["".concat(l,".").concat(u)]||p[u]||h[u]||o;return a?n.createElement(m,r(r({ref:t},d),{},{components:a})):n.createElement(m,r({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,r=new Array(o);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:i,r[1]=s;for(var c=2;c<o;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},16959:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var n=a(87462),i=(a(67294),a(3905));const o={slug:"monthly-incident-sharing-jan-2024",title:"Monthly Incident Sharing - January 2024",authors:["Sebastian"],tags:["Jan","Incidents","Sharing",2024]},r=void 0,s={permalink:"/hashdit/blog/monthly-incident-sharing-jan-2024",source:"@site/blog/2024-02-08/2024-02-08.md",title:"Monthly Incident Sharing - January 2024",description:"Monthly Incident Sharing (Jan 2024)",date:"2024-02-08T00:00:00.000Z",formattedDate:"February 8, 2024",tags:[{label:"Jan",permalink:"/hashdit/blog/tags/jan"},{label:"Incidents",permalink:"/hashdit/blog/tags/incidents"},{label:"Sharing",permalink:"/hashdit/blog/tags/sharing"},{label:"2024",permalink:"/hashdit/blog/tags/2024"}],readingTime:3.84,hasTruncateMarker:!1,authors:[{name:"Sebastian Lim",title:"SCS@HashDit",url:"https://github.com/slim115",imageURL:"https://github.com/slim115.png",key:"Sebastian"}],frontMatter:{slug:"monthly-incident-sharing-jan-2024",title:"Monthly Incident Sharing - January 2024",authors:["Sebastian"],tags:["Jan","Incidents","Sharing","2024"]},prevItem:{title:"HashDit API Integration",permalink:"/hashdit/blog/api-integration"},nextItem:{title:"Twitter Compromise Security Blog",permalink:"/hashdit/blog/twitter-compromise"}},l={authorsImageUrls:[void 0]},c=[{value:"Monthly Incident Sharing (Jan 2024)",id:"monthly-incident-sharing-jan-2024",level:2},{value:"Introduction",id:"introduction",level:3},{value:"Top 5 DApps incidents",id:"top-5-dapps-incidents",level:3},{value:"Orbit Chain - $81.5m",id:"orbit-chain---815m",level:4},{value:"Magic Internet Money (MIM) - $6.5m",id:"magic-internet-money-mim---65m",level:4},{value:"Gamma Strategies - $4.6m",id:"gamma-strategies---46m",level:4},{value:"Radiant - $4.4m",id:"radiant---44m",level:4},{value:"Socket Dot Tech - $3.3m",id:"socket-dot-tech---33m",level:4},{value:"Key lessons for developers",id:"key-lessons-for-developers",level:3}],d={toc:c};function p(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{align:"justify"},(0,i.kt)("h2",{id:"monthly-incident-sharing-jan-2024"},"Monthly Incident Sharing (Jan 2024)"),(0,i.kt)("h3",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"In this monthly series, HashDit is sharing the monthly security incidents in the crypto space and what we can learn from them."),(0,i.kt)("p",null,"For this Jan 2024 edition, the total losses mounted up to $153 million, showing a staggering 453% increase compared to January 2023. "),(0,i.kt)("h3",{id:"top-5-dapps-incidents"},"Top 5 DApps incidents"),(0,i.kt)("h4",{id:"orbit-chain---815m"},"Orbit Chain - $81.5m"),(0,i.kt)("p",null,"Orbit Chain is a Bridge protocol, which uses the model of locking collateral on the source chain to mint wrapped tokens on the destination chain. In this attack, the hacker was able to compromise 1 of the bridge\u2019s vault and steal its funds. ",(0,i.kt)("a",{parentName:"p",href:"https://etherscan.io/tx/0xd8ca42941a0a2c25669267ad8d61f7f9f4118252cb502316602fe16624b80ac8"},"Hack tx")),(0,i.kt)("p",null,"Root cause: Backend compromise. The hacker was able to produce 15 correct Signer keys (v, r, s values), although the threshold needed was just 7. "),(0,i.kt)("p",null,"Vulnerable code snippet:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IMG-1",src:a(52445).Z,width:"369",height:"512"})),(0,i.kt)("h4",{id:"magic-internet-money-mim---65m"},"Magic Internet Money (MIM) - $6.5m"),(0,i.kt)("p",null,"Magic Internet Money is a DeFi protocol which allows lending and borrowing of funds. In this attack, the attacker was able to compromise 1 of the protocol\u2019s markets and steal funds. ",(0,i.kt)("a",{parentName:"p",href:"https://etherscan.io/tx/0x26a83db7e28838dd9fee6fb7314ae58dcc6aee9a20bf224c386ff5e80f7e4cf2"},"Hack tx")),(0,i.kt)("p",null,"Root cause: The borrow function in CauldronV4 contracts was vulnerable to manipulation of the part parameter (the user\u2019s share of total debt) via repeatedly borrowing and repaying an asset, taking advantage of the rounding error. "),(0,i.kt)("p",null,"Vulnerable code snippet:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IMG-2",src:a(66722).Z,width:"512",height:"78"}),"\n",(0,i.kt)("img",{alt:"IMG-3",src:a(47125).Z,width:"512",height:"209"}),"\n",(0,i.kt)("img",{alt:"IMG-4",src:a(60574).Z,width:"512",height:"208"}),"\n",(0,i.kt)("img",{alt:"IMG-5",src:a(72348).Z,width:"512",height:"222"})),(0,i.kt)("h4",{id:"gamma-strategies---46m"},"Gamma Strategies - $4.6m"),(0,i.kt)("p",null,"Gamma Strategies is a DeFi protocol which allows active liquidity management and market making strategies. In this attack, the attacker was able to compromise 1 of the protocol\u2019s vaults and steal funds. ",(0,i.kt)("a",{parentName:"p",href:"https://arbiscan.io/tx/0x6116f311ac199d6f608c52e44c93a0e6961f10380fd379873b8bf27c92402462"},"Hack tx")),(0,i.kt)("p",null,"Root cause: The liquidity ratio checker function erroneously allowed for deposits in any ratio so long as the contents within the vault were single-sided. This allowed for a disproportionate amount of token 0 being deposited, gaining more shares than expected. A second issue was there was no check for the current tick to be within the base position\u2019s lower and upper tick (only a check for the tick change)"),(0,i.kt)("p",null,"Vulnerable code snippet:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IMG-6",src:a(83964).Z,width:"512",height:"217"}),"\n",(0,i.kt)("img",{alt:"IMG-7",src:a(68130).Z,width:"512",height:"188"}),"\n",(0,i.kt)("img",{alt:"IMG-8",src:a(28537).Z,width:"512",height:"170"}),"\n",(0,i.kt)("img",{alt:"IMG-9",src:a(12591).Z,width:"512",height:"155"})),(0,i.kt)("h4",{id:"radiant---44m"},"Radiant - $4.4m"),(0,i.kt)("p",null,"Radiant is a DeFi protocol which allows lending and borrowing of funds across chains. In this attack, the attacker was able to compromise 1 of the protocol\u2019s markets and steal funds. ",(0,i.kt)("a",{parentName:"p",href:"https://arbiscan.io/tx/0x1ce7e9a9e3b6dd3293c9067221ac3260858ce119ecb7ca860eac28b2474c7c9b"},"Hack tx")),(0,i.kt)("p",null,'Root cause: "New/empty market" exploit. It is a known vulnerability to the combination of a rounding error and a totalSupply value of 0. Bug introduced in recent upgrade. '),(0,i.kt)("p",null,"Vulnerable code snippet:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IMG-10",src:a(82568).Z,width:"512",height:"252"})),(0,i.kt)("h4",{id:"socket-dot-tech---33m"},"Socket Dot Tech - $3.3m"),(0,i.kt)("p",null,"Socket Dot Tech is an Interoperability protocol bringing seamless connectivity across blockchains. In this attack, the attacker was able to compromise 1 of the protocol\u2019s vaults and steal funds. ",(0,i.kt)("a",{parentName:"p",href:"https://etherscan.io/tx/0x591d054a9db63f0976e533f447df482bed5f24d7429646570b2108a67e24ce54"},"Hack Tx")),(0,i.kt)("p",null,"Root cause: Unsafe call in the performAction() function. The attacker constructed calldata in the swapExtraData parameter to call transferFrom() of arbitrary tokens, transferring tokens approved to the contract by other users to the attacker's address. Bug was introduced in the recent proxy upgrade. "),(0,i.kt)("p",null,"Code snippet:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IMG-11",src:a(11869).Z,width:"512",height:"220"})),(0,i.kt)("h3",{id:"key-lessons-for-developers"},"Key lessons for developers"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Keys should be properly secured, rotated regularly and have some level of decentralization. Adopt a ",(0,i.kt)("strong",{parentName:"li"},"zero-trust model"),".\nConduct proper background checks for new employees in view of insider compromises.")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Validation is important - ",(0,i.kt)("strong",{parentName:"li"},"ensure all possible user inputs are checked for state changing")," methods. This is especially true for calldata parameters where attackers can craft any data and when the protocol contract handles users\u2019 approvals.")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Rounding in Solidity always rounds down. As such, it is important to perform multiplication before division and to round down for the user during withdrawals, and round up during deposits. Consider ",(0,i.kt)("strong",{parentName:"p"},"increasing precision")," during calculations to avoid unexpected manipulation attacks."),(0,i.kt)("p",{parentName:"li"},"However, in the latest donation attacks for lending protocols, we see that the usual rule to favor protocol for calculations is no longer sufficient. There must be better ",(0,i.kt)("strong",{parentName:"p"},"health checks for bad debt")," as well, at the end state of a transaction."))),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"For projects utilizing lending protocols:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"When deploying a new market (especially for Compound / Aave v2 forks), ensure that it is first ",(0,i.kt)("strong",{parentName:"li"},"initialized with 0 Collateral Factor")," and ",(0,i.kt)("strong",{parentName:"li"},"deploy with small deposit to lock dead shares"),"."),(0,i.kt)("li",{parentName:"ul"},"Disallow deposits when the pool price is out of the base range of liquidity."),(0,i.kt)("li",{parentName:"ul"},"Increase precision on price change thresholds and deposit ratios."),(0,i.kt)("li",{parentName:"ul"},"For those allowing single-sided pool deposits, add a conditional statement to ",(0,i.kt)("strong",{parentName:"li"},"prevent deposits of any ratio of assets")," so long as vault is single-sided."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Always engage a security auditor to ",(0,i.kt)("strong",{parentName:"p"},"review all code upgrades before they are deployed on chain"),". This prevents new bugs from being introduced."))),(0,i.kt)("p",null,"Feel free to contact us at ",(0,i.kt)("a",{parentName:"p",href:"mailto:support@hashdit.io"},"support@hashdit.io")," for any support needed! Stay safe!")))}p.isMDXComponent=!0},52445:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/1-1fda6473d3e9922fb49bddae3980573c.png"},82568:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/10-507490cb1f730fccc10a3573236a8f0b.png"},11869:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/11-ce162f921fec96de828bfc25bc800407.png"},66722:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2-f2213b5f67805e7722fa82f5d2764fae.png"},47125:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/3-4de6b41f15584ccf02e4b4c9d959467e.png"},60574:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/4-3a5c14f90b22c05292e490127315d2f4.png"},72348:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/5-5241913e554a5ad8b138938215477fc0.png"},83964:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/6-19bc59fc19c58e5f1193f8b093983795.png"},68130:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/7-9abfb14c2724d7dd691084edbfcdfd67.png"},28537:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/8-cd990f7ecccf920ab38d06b39759c080.png"},12591:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/9-71712f1eccca3b5628354c50ca733e15.png"}}]);